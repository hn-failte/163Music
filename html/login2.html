<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="../css/music_bar.css" />
    <link rel="stylesheet" href="../css/my_list.css"  />
    <link rel="stylesheet" href="../lib/bootstrap-3.3.7-dist/css/bootstrap.css" />
    <script src="../lib/jquery.js"></script>
    <script src="../lib/bootstrap-3.3.7-dist/js/bootstrap.js"></script>
    <script src="../lib/layer/layer.js"></script>
    <title>Document</title>

</head>
<body>
    <div class="head">
        <div class="nav">
            <div class="div1">
                <img src="../img/images/a_03.jpg" />
            </div>
            <div class="div2">
                <ul>
                    <li><a href="#">发现音乐</a></li>
                    <li><a href="#">我的音乐</a></li>
                    <li><a href="#">朋友</a></li>
                    <li><a href="#">商城</a></li>
                    <li><a href="#">音乐人</a></li>
                    <li><a href="#">下载客户端</a></li>
                </ul>
            </div>
            <div class="div3">
                <form>
                    <input type="text" class="text">
                </form>
                <div class="czzzx">
                    创作者中心
                </div>
                <img src="../img/images/a_09.jpg" />

                <div class="dropdown">
                    <button  class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                      UserName
                      <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                      <li class="li1"><a href="#">MyPage</a></li>
                      <li class="li2"><a href="#">MyMassge</a></li>
                      <li class="li3"><a href="#">RealName</a></li>
                      <li class="li4"><a href="#">Setting</a></li>
                      <li class="li5"><a href="#">LogOut</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- 导航栏结束 -->
    <div class="mypage">
        <div class="muisc-list">
            <div class="mywon-list">
                <span class="myown">
                    我的收藏
                    <button id="btn">创建歌单</button><button >+</button>
                </span>
            </div>
            <ul id="ul" class="text-primary">
                <li class="my-li">
                    <img src="../img/images/c_06.jpg" alt="" class="myli-img">
                    <span>名称</span>
                    <p>简介</p>
                    <ul></ul>
                </li>
                <li class="my-li">
                    <img src="../img/images/c_06.jpg" alt="" class="myli-img">
                    <span>名称</span>
                    <p>简介</p>
                    <ul></ul>
                </li>
                <li class="my-li">
                    <img src="../img/images/c_06.jpg" alt="" class="myli-img">
                    <span>名称</span>
                    <p>简介</p>
                    <ul></ul>
                </li>
                <li class="my-li">
                    <img src="../img/images/c_06.jpg" alt="" class="myli-img">
                    <span>名称</span>
                    <p>简介</p>
                    <ul></ul>
                </li>
                <li class="my-li">
                    <img src="../img/images/c_06.jpg" alt="" class="myli-img">
                    <span>名称</span>
                    <p>简介</p>
                    <ul></ul>
                </li>
                <li class="my-li">
                    <img src="../img/images/c_06.jpg" alt="" class="myli-img">
                    <span>名称</span>
                    <p>简介</p>
                    <ul></ul>
                </li>
                <li class="my-li">
                    <img src="../img/images/c_06.jpg" alt="" class="myli-img">
                    <span>名称</span>
                    <p>简介</p>
                    <ul></ul>
                </li>
                <li class="my-li">
                    <img src="../img/images/c_06.jpg" alt="" class="myli-img">
                    <span>名称</span>
                    <p>简介</p>
                    <ul></ul>
                </li>
            </ul>
        </div>
        <div class="music-data">
            <div class="data-img">
                <img src="../img/sj-img/mi.jpg" height="120px" width="120px"/>
            </div>
            <div class="data-text">
                <span>歌单名<a href="#">编辑歌单</a></span>
                <p>时间</p>
                <p>描述文字</p>
                <button>播放</button><button>+</button>
                <a>收藏 </a>
                <a>分享 </a>
                <a>下载 </a>
                <a>评论 </a>
            </div>
        </div>
        <div class="data-list">
            <div class="data-div">歌曲列表</div>
            <ul>
                <li>
                    <span>操作</span>
                    <b> 歌曲名称</b>
                    <i> 时长</i>
                    <em>歌手</em>
                    <div>专辑名称</div>
                </li>
                <li>
                    <span>1</span>
                    <i> 时长</i>
                    <b> 歌曲名称</b>
                    <em>歌手</em>
                    <div>专辑名称</div>
                </li>
                <li>
                    <span>2</span>
                    <i> 时长</i>
                    <b> 歌曲名称</b>
                    <em>歌手</em>
                    <div>专辑名称</div>
                </li>
                <li>
                    <span>  1</span>
                    <b> 歌曲名称</b>
                    <i> 时长</i>
                    <em>歌手</em>
                    <div>专辑名称</div>
                </li>
                <li>
                    <span>2</span>
                    <i> 时长</i>
                    <b> 歌曲名称</b>
                    <em>歌手</em>
                    <div>专辑名称</div>
                </li>
                <li>
                    <span>2</span>
                    <i> 时长</i>
                    <b> 歌曲名称</b>
                    <em>歌手</em>
                    <div>专辑名称</div>
                </li>
                <li>
                    <span>  1</span>
                    <b> 歌曲名称</b>
                    <i> 时长</i>
                    <em>歌手</em>
                    <div>专辑名称</div>
                </li>
                <li>
                    <span>  1</span>
                    <b> 歌曲名称</b>
                    <i> 时长</i>
                    <em>歌手</em>
                    <div>专辑名称</div>
                </li>
                <li>
                    <span>  1</span>
                    <b> 歌曲名称</b>
                    <i> 时长</i>
                    <em>歌手</em>
                    <div>专辑名称</div>
                </li>  
            </ul>
        </div>
        <div class="data-node">
            <h4>热门评论</h4>
            <div class="node-show"></div>
            <form action="#" method="post" >
                <!-- <p>用户名<input type="text" name="username"></p> -->
                <p><textarea name="content" ></textarea></p>
                <p><input type="submit" value="留言"></p>
            </form>
        </div>
    </div>


<!-- 1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br>1<br> -->






    <!-- 底部播放栏 -->
    <div class="di">

        <div class="player">
            <p></p>
            <audio id="audio" src="" controls="controls"></audio>
            <button class="glyphicon glyphicon-align-justify"></button>
            <ul id="asideList">
                <li>111</li>
            </ul>
        </div>
        
    </div> 




</body>
<script src="../js/music_bar.js"></script>
<script>
// console.log($(".container"));
    $("li").mouseenter(function(){
        $(this).find("a").css({
            "color":"white",  
            // "background": "url(../img/images/b2_03.jpg) no-repeat",
            // "background-size": "20px 25px"
            "background":"black"
        });
    });

    $("li").mouseleave(function(){
        $(this).find("a").css({
            "color":"white",
            "background":"#2D2D2D"
        });

    });

    $(".btn").click(function(){
        location.href="login-T.html";
    })
    $(".li1").click(function(){
        location.href="login-T.html";
    })
//我的页面联动
    $(".dropdown").mouseenter(function(){
        $(".dropdown-menu").show();
    })
    $(".dropdown-menu").mouseleave(function(){
        $(".dropdown-menu").hide();
    })

    $().ready(function(){
        //getList();
    })
console.log($(".data-list>ul li span")[0].innerText);
console.log($(".data-list>ul li span")[0].innerHTML);
    function getList() {
//console.log($("!"));
        $.ajax({
            url: "http://10.36.133.110:8086/php/crud.php",
            type: "get",
            data: "action=gl&u_id=1",
            dataType: "json",
            success: function(res){
                var data="";
                for(let item in res){
                    data+=`<li list_id="${res[item]["list_id"]}"><span class="glyphicon glyphicon-chevron-right text-warning"></span>${res[item]["list_name"]}<ul class="song_ul"></ul></li>`;
                }
                $("#ul").html(data);
            }
        });
    }

    $("#btn").click(function(){
        layer.prompt({title: "输入歌单名", formType: 0}, function(pass, index){
            if(pass!=""){
                layer.close(index);
                $.ajax({
                    url: "http://10.36.133.110:8086/php/crud.php",
                    data: "action=cl&list_name="+pass+"&u_id=1",
                    type: "get",
                    dataType: "json",
                    success: function(res){
                        if(res.state==1){
                            layer.msg("添加成功", {icon: 1}, function(){
                                getList();
                            });
                        }
                        else{
                            layer.msg("添加失败", {icon: 2});
                        }
                    }
                });
            }
        });
    });

    $("#ul").on("click", function(e){
        if($(e.target).parent().attr("list_id") || $(e.target).attr("list_id")){
            var dealUl;
            if($(e.target).parent().attr("list_id")) dealUl = $(e.target).parent().children().eq(1);
            else dealUl = $(e.target).children().eq(1);
            var icon = dealUl.parent().children().eq(0);
            
            if(icon.hasClass("glyphicon-chevron-right")){
                icon[0].className="";
                icon.addClass("glyphicon glyphicon-chevron-down");
            }
            else if(icon.hasClass("glyphicon-chevron-down")){
                icon[0].className="";
                icon.addClass("glyphicon glyphicon-chevron-right");
            }
            if(dealUl.html()=="") listExtend(dealUl);
            else dealUl.toggle();
        }
        else if($(e.target).attr("m_id"))  play($(e.target));
    })


    function listExtend(jqobj){
        $.ajax({
            url: "http://10.36.133.110:8086/php/crud.php",
            type: "get",
            data: "action=gs&list_id="+jqobj.parent().attr("list_id")+"&u_id=1",
            dataType: "json",
            success: function(res){
                var data = "";
                for(let item of res){
                    data+=`<li m_id="208902">${item["m_name"]} ${item["m_author"]}</li>`;
                }
                jqobj.html(data);
            }
        });
    }




</script>
</html>